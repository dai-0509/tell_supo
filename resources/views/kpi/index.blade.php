@extends('layouts.app')

@section('content')
<div class="min-h-screen bg-gray-50" x-data="kpiManagement()">
    <!-- „Éö„Éº„Ç∏„Éò„ÉÉ„ÉÄ„Éº -->
    <div class="bg-white shadow">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">üéØ KPIÁÆ°ÁêÜ</h1>
                    </div>
                    <div class="text-sm text-gray-500">
                        {{ now()->format('YÂπ¥mÊúà') }}„ÅÆÂÆüÁ∏æ
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- ÁõÆÊ®ôË®≠ÂÆö„Ç®„É™„Ç¢ -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">üìÖ ÁõÆÊ®ôË®≠ÂÆö</h2>
                <div class="text-sm text-gray-500" x-text="getCurrentPeriodText()">
                    2025Âπ¥8Êúà Á¨¨35ÈÄ± (8/25-8/31)
                </div>
            </div>
            
            <form @submit.prevent="updateTargets" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÈÄ±Ê¨°Êû∂ÈõªÁõÆÊ®ô</label>
                        <div class="relative">
                            <input 
                                type="number" 
                                x-model="targets.weekly_calls"
                                min="0"
                                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-12"
                            >
                            <span class="absolute right-3 top-2 text-sm text-gray-500">‰ª∂</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÈÄ±Ê¨°„Ç¢„ÉùÁõÆÊ®ô</label>
                        <div class="relative">
                            <input 
                                type="number" 
                                x-model="targets.weekly_appointments"
                                min="0"
                                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-12"
                            >
                            <span class="absolute right-3 top-2 text-sm text-gray-500">‰ª∂</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÊúàÊ¨°Êû∂ÈõªÁõÆÊ®ô</label>
                        <div class="relative">
                            <input 
                                type="number" 
                                x-model="targets.monthly_calls"
                                min="0"
                                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-12"
                            >
                            <span class="absolute right-3 top-2 text-sm text-gray-500">‰ª∂</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÊúàÊ¨°„Ç¢„ÉùÁõÆÊ®ô</label>
                        <div class="relative">
                            <input 
                                type="number" 
                                x-model="targets.monthly_appointments"
                                min="0"
                                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-12"
                            >
                            <span class="absolute right-3 top-2 text-sm text-gray-500">‰ª∂</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end">
                    <button 
                        type="submit"
                        :disabled="updatingTargets"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50"
                    >
                        <span x-show="!updatingTargets">ÁõÆÊ®ôÊõ¥Êñ∞</span>
                        <span x-show="updatingTargets">Êõ¥Êñ∞‰∏≠...</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- ÈÄ≤ÊçóÁä∂Ê≥Å -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- ÈÄ±Ê¨°ÈÄ≤Êçó -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ÈÄ±Ê¨°ÈÄ≤Êçó</h3>
                
                <!-- Êû∂ÈõªÊï∞ÈÄ≤Êçó -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">Êû∂ÈõªÊï∞</span>
                        <span class="text-lg font-bold text-gray-900">
                            <span x-text="performance.weekly_calls">78</span>/<span x-text="targets.weekly_calls">100</span> 
                            (<span x-text="Math.round(performance.weekly_calls / targets.weekly_calls * 100)">78</span>%)
                        </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div 
                            class="bg-blue-600 h-3 rounded-full transition-all duration-700"
                            :style="`width: ${Math.min(performance.weekly_calls / targets.weekly_calls * 100, 100)}%`"
                        ></div>
                    </div>
                    <div class="flex mt-2 space-x-1">
                        <template x-for="i in 5" :key="i">
                            <div 
                                :class="i <= Math.ceil(performance.weekly_calls / targets.weekly_calls * 5) ? 'bg-blue-600' : 'bg-gray-300'"
                                class="flex-1 h-2 rounded"
                            ></div>
                        </template>
                    </div>
                </div>
                
                <!-- „Ç¢„ÉùÊï∞ÈÄ≤Êçó -->
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">„Ç¢„ÉùÊï∞</span>
                        <span class="text-lg font-bold text-gray-900">
                            <span x-text="performance.weekly_appointments">15</span>/<span x-text="targets.weekly_appointments">20</span> 
                            (<span x-text="Math.round(performance.weekly_appointments / targets.weekly_appointments * 100)">75</span>%)
                        </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div 
                            class="bg-green-600 h-3 rounded-full transition-all duration-700"
                            :style="`width: ${Math.min(performance.weekly_appointments / targets.weekly_appointments * 100, 100)}%`"
                        ></div>
                    </div>
                    <div class="flex mt-2 space-x-1">
                        <template x-for="i in 5" :key="i">
                            <div 
                                :class="i <= Math.ceil(performance.weekly_appointments / targets.weekly_appointments * 5) ? 'bg-green-600' : 'bg-gray-300'"
                                class="flex-1 h-2 rounded"
                            ></div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- ÊúàÊ¨°ÈÄ≤Êçó -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ÊúàÊ¨°ÈÄ≤Êçó</h3>
                
                <!-- Êû∂ÈõªÊï∞ÈÄ≤Êçó -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">Êû∂ÈõªÊï∞</span>
                        <span class="text-lg font-bold text-gray-900">
                            <span x-text="performance.monthly_calls">315</span>/<span x-text="targets.monthly_calls">400</span> 
                            (<span x-text="Math.round(performance.monthly_calls / targets.monthly_calls * 100)">79</span>%)
                        </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div 
                            class="bg-blue-600 h-3 rounded-full transition-all duration-700"
                            :style="`width: ${Math.min(performance.monthly_calls / targets.monthly_calls * 100, 100)}%`"
                        ></div>
                    </div>
                    <div class="flex mt-2 space-x-1">
                        <template x-for="i in 5" :key="i">
                            <div 
                                :class="i <= Math.ceil(performance.monthly_calls / targets.monthly_calls * 5) ? 'bg-blue-600' : 'bg-gray-300'"
                                class="flex-1 h-2 rounded"
                            ></div>
                        </template>
                    </div>
                </div>
                
                <!-- „Ç¢„ÉùÊï∞ÈÄ≤Êçó -->
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">„Ç¢„ÉùÊï∞</span>
                        <span class="text-lg font-bold text-gray-900">
                            <span x-text="performance.monthly_appointments">62</span>/<span x-text="targets.monthly_appointments">80</span> 
                            (<span x-text="Math.round(performance.monthly_appointments / targets.monthly_appointments * 100)">78</span>%)
                        </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div 
                            class="bg-green-600 h-3 rounded-full transition-all duration-700"
                            :style="`width: ${Math.min(performance.monthly_appointments / targets.monthly_appointments * 100, 100)}%`"
                        ></div>
                    </div>
                    <div class="flex mt-2 space-x-1">
                        <template x-for="i in 5" :key="i">
                            <div 
                                :class="i <= Math.ceil(performance.monthly_appointments / targets.monthly_appointments * 5) ? 'bg-green-600' : 'bg-gray-300'"
                                class="flex-1 h-2 rounded"
                            ></div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- ÊàêÂäüÁéáÊé®Áßª -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">8ÊúàÊàêÂäüÁéá</h3>
                <div class="h-32 flex items-end justify-center">
                    <canvas id="successRateChart" class="w-full h-full"></canvas>
                </div>
                <div class="mt-4 text-center">
                    <div class="text-sm text-gray-500">‰ªäÊúàÂπ≥Âùá</div>
                    <div class="text-2xl font-bold text-green-600" x-text="averageSuccessRate + '%'">65%</div>
                </div>
            </div>
        </div>

        <!-- Ë©≥Á¥∞„Ç∞„É©„Éï„Ç®„É™„Ç¢ -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-lg font-semibold text-gray-800">üìä ÊúàÈñì„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊé®Áßª</h2>
                <div class="flex items-center space-x-4">
                    <div class="flex space-x-2">
                        <button 
                            @click="chartType = 'calls'"
                            :class="chartType === 'calls' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'"
                            class="px-3 py-1 rounded text-sm font-medium transition-colors"
                        >
                            Êû∂ÈõªÊï∞
                        </button>
                        <button 
                            @click="chartType = 'appointments'"
                            :class="chartType === 'appointments' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'"
                            class="px-3 py-1 rounded text-sm font-medium transition-colors"
                        >
                            „Ç¢„ÉùÊï∞
                        </button>
                        <button 
                            @click="chartType = 'success_rate'"
                            :class="chartType === 'success_rate' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'"
                            class="px-3 py-1 rounded text-sm font-medium transition-colors"
                        >
                            ÊàêÂäüÁéá
                        </button>
                    </div>
                    <select 
                        x-model="selectedPeriod"
                        class="text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                    >
                        <option value="current_month">‰ªäÊúà</option>
                        <option value="last_month">ÂÖàÊúà</option>
                        <option value="last_3_months">ÈÅéÂéª3„É∂Êúà</option>
                    </select>
                </div>
            </div>
            
            <div class="h-80">
                <canvas id="performanceChart"></canvas>
            </div>
        </div>

        <!-- KPIË©≥Á¥∞ÂàÜÊûê -->
        <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- ÈÄ±Âà•ÊØîËºÉ -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üìà ÈÄ±Âà•„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ</h3>
                <div class="space-y-3">
                    <template x-for="week in weeklyComparison" :key="week.week">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <div class="font-medium text-gray-900" x-text="week.period"></div>
                                <div class="text-sm text-gray-500">
                                    Êû∂Èõª: <span x-text="week.calls">125</span>‰ª∂ | 
                                    „Ç¢„Éù: <span x-text="week.appointments">18</span>‰ª∂
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-semibold" :class="week.trend === 'up' ? 'text-green-600' : week.trend === 'down' ? 'text-red-600' : 'text-gray-600'">
                                    <span x-show="week.trend === 'up'">üìà +</span>
                                    <span x-show="week.trend === 'down'">üìâ </span>
                                    <span x-show="week.trend === 'same'">‚û°Ô∏è </span>
                                    <span x-text="week.change">15</span>%
                                </div>
                                <div class="text-sm text-gray-500">ÂâçÈÄ±ÊØî</div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- ÁõÆÊ®ôÈÅîÊàê‰∫àÊ∏¨ -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üîÆ ÁõÆÊ®ôÈÅîÊàê‰∫àÊ∏¨</h3>
                <div class="space-y-4">
                    <div class="p-4 bg-blue-50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-medium text-blue-900">ÊúàÊ¨°Êû∂ÈõªÁõÆÊ®ô</span>
                            <span class="text-sm text-blue-600" x-text="monthlyCallsPrediction.status">ÈÅîÊàêÂèØËÉΩ</span>
                        </div>
                        <div class="text-sm text-blue-700">
                            ÁèæÂú®„ÅÆ„Éö„Éº„Çπ„Åß<span x-text="monthlyCallsPrediction.predicted">385</span>‰ª∂ÈÅîÊàê‰∫àÊÉ≥
                            <span x-text="monthlyCallsPrediction.needed > 0 ? '(„ÅÇ„Å®' + monthlyCallsPrediction.needed + '‰ª∂ÂøÖË¶Å)' : ''"></span>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-green-50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-medium text-green-900">ÊúàÊ¨°„Ç¢„ÉùÁõÆÊ®ô</span>
                            <span class="text-sm text-green-600" x-text="monthlyAppointmentsPrediction.status">ÈÅîÊàêÂèØËÉΩ</span>
                        </div>
                        <div class="text-sm text-green-700">
                            ÁèæÂú®„ÅÆ„Éö„Éº„Çπ„Åß<span x-text="monthlyAppointmentsPrediction.predicted">76</span>‰ª∂ÈÅîÊàê‰∫àÊÉ≥
                            <span x-text="monthlyAppointmentsPrediction.needed > 0 ? '(„ÅÇ„Å®' + monthlyAppointmentsPrediction.needed + '‰ª∂ÂøÖË¶Å)' : ''"></span>
                        </div>
                    </div>
                    
                    <!-- ÊîπÂñÑÊèêÊ°à -->
                    <div class="p-4 bg-yellow-50 rounded-lg">
                        <div class="font-medium text-yellow-900 mb-2">üí° ÊîπÂñÑÊèêÊ°à</div>
                        <ul class="text-sm text-yellow-700 space-y-1">
                            <template x-for="suggestion in suggestions" :key="suggestion">
                                <li class="flex items-start">
                                    <span class="mr-2">‚Ä¢</span>
                                    <span x-text="suggestion"></span>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function kpiManagement() {
    return {
        targets: {
            weekly_calls: 100,
            weekly_appointments: 20,
            monthly_calls: 400,
            monthly_appointments: 80
        },
        
        performance: {
            weekly_calls: 78,
            weekly_appointments: 15,
            monthly_calls: 315,
            monthly_appointments: 62
        },
        
        updatingTargets: false,
        chartType: 'calls',
        selectedPeriod: 'current_month',
        averageSuccessRate: 65,
        
        weeklyComparison: [
            { week: 1, period: 'Á¨¨1ÈÄ± (8/1-8/7)', calls: 95, appointments: 14, trend: 'down', change: -5 },
            { week: 2, period: 'Á¨¨2ÈÄ± (8/8-8/14)', calls: 102, appointments: 16, trend: 'up', change: 7 },
            { week: 3, period: 'Á¨¨3ÈÄ± (8/15-8/21)', calls: 118, appointments: 17, trend: 'up', change: 16 },
            { week: 4, period: 'Á¨¨4ÈÄ± (8/22-8/28)', calls: 78, appointments: 15, trend: 'down', change: -34 }
        ],
        
        monthlyCallsPrediction: {
            predicted: 385,
            needed: 15,
            status: 'Ë¶ÅÂä™Âäõ'
        },
        
        monthlyAppointmentsPrediction: {
            predicted: 76,
            needed: 4,
            status: 'ÈÅîÊàêÂèØËÉΩ'
        },
        
        suggestions: [
            '1Êó•„ÅÇ„Åü„Çä5‰ª∂„ÅÆËøΩÂä†Êû∂Èõª„ÅßÊúàÊ¨°ÁõÆÊ®ôÈÅîÊàê',
            'ÂçàÂæå„ÅÆÊû∂ÈõªÊàêÂäüÁéá„Åå‰Ωé„ÅÑÂÇæÂêë - ÊôÇÈñìÂ∏Ø„ÅÆË¶ãÁõ¥„ÅóÊ§úË®é',
            'ÈÄ±Êú´Ââç„ÅÆÈáëÊõúÊó•„ÅåÊúÄ„ÇÇÊàêÂäüÁéá„ÅåÈ´ò„ÅÑ - ÈáçË¶ÅÈ°ßÂÆ¢„ÅØÈáëÊõúÊó•„Å´ÈõÜ‰∏≠'
        ],
        
        async updateTargets() {
            this.updatingTargets = true;
            try {
                // ÂÆüÈöõ„ÅÆAPI„Ç≥„Éº„É´„ÅÆ‰ª£„Çè„Çä„Å´„É¢„ÉÉ„ÇØ„Éá„Éº„Çø
                await new Promise(resolve => setTimeout(resolve, 1000));
                console.log('ÁõÆÊ®ô„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü:', this.targets);
            } catch (error) {
                console.error('Error updating targets:', error);
                alert('ÁõÆÊ®ô„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            } finally {
                this.updatingTargets = false;
            }
        },
        
        getCurrentPeriodText() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            
            // ÈÄ±„ÅÆË®àÁÆóÔºàÁ∞°ÊòìÁâàÔºâ
            const weekOfMonth = Math.ceil(date / 7);
            const startDate = (weekOfMonth - 1) * 7 + 1;
            const endDate = Math.min(weekOfMonth * 7, new Date(year, month, 0).getDate());
            
            return `${year}Âπ¥${month}Êúà Á¨¨${weekOfMonth}ÈÄ± (${month}/${startDate}-${month}/${endDate})`;
        },
        
        init() {
            // Chart.jsÂàùÊúüÂåñ
            this.$nextTick(() => {
                this.initSuccessRateChart();
                this.initPerformanceChart();
            });
            
            // „ÉÅ„É£„Éº„Éà„Çø„Ç§„ÉóÂ§âÊõ¥ÊôÇ„ÅÆÂÜçÊèèÁîª
            this.$watch('chartType', () => {
                this.updatePerformanceChart();
            });
            
            this.$watch('selectedPeriod', () => {
                this.updatePerformanceChart();
            });
        },
        
        initSuccessRateChart() {
            const ctx = document.getElementById('successRateChart');
            if (ctx) {
                this.successRateChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['1ÈÄ±', '2ÈÄ±', '3ÈÄ±', '4ÈÄ±'],
                        datasets: [{
                            label: 'ÊàêÂäüÁéá',
                            data: [60, 65, 68, 70],
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: { display: false },
                            y: { 
                                display: false,
                                min: 50,
                                max: 80
                            }
                        }
                    }
                });
            }
        },
        
        initPerformanceChart() {
            const ctx = document.getElementById('performanceChart');
            if (ctx) {
                this.performanceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 25}, (_, i) => i + 1),
                        datasets: [{
                            label: 'Êû∂ÈõªÊï∞',
                            data: [12, 15, 18, 14, 20, 16, 22, 18, 25, 20, 15, 19, 23, 17, 21, 24, 19, 16, 20, 18, 22, 15, 19, 17, 20],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Êó•'
                                }
                            },
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '‰ª∂Êï∞'
                                }
                            }
                        }
                    }
                });
            }
        },
        
        updatePerformanceChart() {
            if (!this.performanceChart) return;
            
            let data, label, color, backgroundColor;
            
            switch (this.chartType) {
                case 'appointments':
                    data = [2, 3, 2, 1, 4, 2, 3, 2, 4, 3, 2, 3, 4, 2, 3, 4, 3, 2, 3, 2, 4, 2, 3, 2, 3];
                    label = '„Ç¢„ÉùÊï∞';
                    color = '#059669';
                    backgroundColor = 'rgba(5, 150, 105, 0.1)';
                    break;
                case 'success_rate':
                    data = [60, 65, 70, 55, 75, 60, 68, 62, 72, 67, 58, 63, 69, 61, 66, 71, 64, 59, 65, 62, 68, 57, 63, 60, 67];
                    label = 'ÊàêÂäüÁéá (%)';
                    color = '#d97706';
                    backgroundColor = 'rgba(217, 119, 6, 0.1)';
                    break;
                default:
                    data = [12, 15, 18, 14, 20, 16, 22, 18, 25, 20, 15, 19, 23, 17, 21, 24, 19, 16, 20, 18, 22, 15, 19, 17, 20];
                    label = 'Êû∂ÈõªÊï∞';
                    color = '#2563eb';
                    backgroundColor = 'rgba(37, 99, 235, 0.1)';
            }
            
            this.performanceChart.data.datasets[0].data = data;
            this.performanceChart.data.datasets[0].label = label;
            this.performanceChart.data.datasets[0].borderColor = color;
            this.performanceChart.data.datasets[0].backgroundColor = backgroundColor;
            this.performanceChart.update();
        }
    }
}
</script>
@endsection